from sqlmodel import SQLModel, Field, ForeignKey, Relationship
from typing import Optional, TYPE_CHECKING

if TYPE_CHECKING:
    from src.entity.{{ entity_class.lower() }} import {{ entity_class }}
    from src.entity.{{ target_class.lower() }} import {{ target_class }}

class {{ class_name }}(SQLModel, table=True):
    {{ entity_class.lower() }}_id: int = Field(ForeignKey("{{ entity_class.lower() }}.id"), primary_key=True)
    {{ target_class.lower() }}_id: int = Field(ForeignKey("{{ target_class.lower() }}.id"), primary_key=True)

    {{ entity_class.lower() }}: Optional["{{ entity_class }}"] = Relationship(back_populates="{{ property_name }}s")
    {{ target_class.lower() }}: Optional["{{ target_class }}"] = Relationship(back_populates="{{ entity_class.lower() }}s")